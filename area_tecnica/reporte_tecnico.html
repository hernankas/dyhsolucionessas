<?php
require_once('tcpdf/tcpdf.php');

// Crear nuevo documento PDF
$pdf = new TCPDF();
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('Nombre del Técnico');
$pdf->SetTitle('Reporte Técnico');

// Configurar márgenes pequeños y sin encabezados ni pies automáticos
$pdf->SetMargins(5, 5, 5); 
$pdf->SetAutoPageBreak(FALSE, 0); // Desactivar salto automático de página

// Agregar una página
$pdf->AddPage();

// Configurar fuente
$pdf->SetFont('helvetica', '', 10);

// Contenido del encabezado de la empresa con márgenes controlados
$empresa = "
<h2 style='font-size: 10px; margin: 0;'>Nombre de la Empresa</h2>
<p style='font-size: 9px; margin: 0;'>Dirección de la Empresa</p>
<p style='font-size: 9px; margin: 0;'>Teléfono: (XXX) XXX-XXXX</p>
<p style='font-size: 9px; margin: 0;'>Email: contacto@empresa.com</p>
";

// Escribir el contenido del encabezado sin ningún tipo de espacio innecesario
$pdf->writeHTML($empresa, true, false, true, false, '');

// Título del reporte
$pdf->SetFont('helvetica', 'B', 12);
$pdf->Ln(3); // Añadir un pequeño espacio entre el encabezado y el título
$pdf->Cell(0, 10, 'Reporte Técnico', 0, 1, 'C');

// Volver a fuente normal
$pdf->SetFont('helvetica', '', 10);

// Obtener datos del formulario
$cliente = $_POST['cliente'];
$tecnico = $_POST['tecnico'];
$fecha = $_POST['fecha'];
$ubicacion = $_POST['ubicacion'];
$equipo = $_POST['equipo'];
$equipo_otro = isset($_POST['equipo_otro']) ? $_POST['equipo_otro'] : '';
$descripcion = $_POST['descripcion'];
$solucion = $_POST['solucion'];
$estado = $_POST['estado'];
$observaciones = $_POST['observaciones'];
$firma = $_POST['firma'];

// Contenido del reporte técnico con espaciado controlado
$reporte = "
<p><strong>Nombre del Cliente:</strong> $cliente</p>
<p><strong>Nombre del Técnico:</strong> $tecnico</p>
<p><strong>Fecha de Revisión:</strong> $fecha</p>
<p><strong>Ubicación del Equipo:</strong> $ubicacion</p>
<p><strong>Tipo de Equipo:</strong> $equipo" . ($equipo === 'otros' ? " - $equipo_otro" : "") . "</p>
<p><strong>Descripción del Problema:</strong><br/> $descripcion</p>
<p><strong>Solución Realizada:</strong><br/> $solucion</p>
<p><strong>Estado General del Equipo:</strong> $estado</p>
<p><strong>Observaciones Adicionales:</strong><br/> $observaciones</p>
<p><strong>Firma del Técnico:</strong> $firma</p>
";

// Escribir contenido en el PDF con control total de espaciado
$pdf->writeHTML($reporte, true, false, true, false, '');

// Enviar el PDF al navegador
$pdf->Output('reporte_tecnico.pdf', 'I');
?>
