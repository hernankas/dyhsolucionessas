<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte Técnico</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
        }

        .container {
            background-color: white;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 800px;
        }

        h2 {
            text-align: center;
            color: #004d99;
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 12px;
        }

        input, textarea, select {
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
        }

        textarea {
            resize: vertical;
        }

        button {
            background-color: #004d99;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        #signature-pad {
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 100%;
            height: 150px;
            margin-bottom: 15px;
            background-color: #fff;
        }

        #clear-signature {
            background-color: red;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
</head>
<body>
    <div class="container" id="formulario">
        <h2>Reporte Técnico</h2>

        <label for="orden">Número de Orden:</label>
        <input type="text" id="orden" name="orden" value="N/A">

        <label for="cliente">Nombre del Cliente:</label>
        <input type="text" id="cliente" name="cliente" value="N/A">

        <label for="direccion">Dirección Cliente:</label>
        <input type="text" id="direccion" name="direccion" value="N/A">

        <label for="tipoServicio">Tipo de Servicio:</label>
        <select id="tipoServicio" name="tipoServicio">
            <option value="Preventivo">Mantenimiento Preventivo</option>
            <option value="Correctivo" selected>Mantenimiento Correctivo</option>
            <option value="Revision">Revisión</option>
        </select>

        <label for="equipo">Descripción del Equipo:</label>
        <input type="text" id="equipo" name="equipo" value="N/A">

        <label for="diagnostico">Diagnóstico:</label>
        <textarea id="diagnostico" name="diagnostico">N/A</textarea>

        <label for="signature-pad">Firma del Cliente:</label>
        <canvas id="signature-pad"></canvas>
        <button type="button" id="clear-signature">Limpiar Firma</button>

        <button onclick="generarPDF()">Generar PDF</button>
    </div>

    <script>
        const canvas = document.getElementById('signature-pad');
        const signaturePad = new SignaturePad(canvas);

        document.getElementById('clear-signature').addEventListener('click', function () {
            signaturePad.clear();
        });

        function resizeCanvas() {
            const ratio = Math.max(window.devicePixelRatio || 1, 1);
            canvas.width = canvas.offsetWidth * ratio;
            canvas.height = canvas.offsetHeight * ratio;
            canvas.getContext("2d").scale(ratio, ratio);
        }

        window.addEventListener("resize", resizeCanvas);
        resizeCanvas();

        function generarPDF() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF({ unit: 'mm', format: 'a4' });
            const lineHeight = 10; // Espaciado entre líneas
            let y = 10; // Posición inicial

            pdf.setFontSize(16);
            pdf.text("Reporte Técnico", 10, y);
            y += lineHeight * 2;

            pdf.setFontSize(12);
            pdf.text("Número de Orden: " + document.getElementById('orden').value, 10, y);
            y += lineHeight;
            pdf.text("Nombre del Cliente: " + document.getElementById('cliente').value, 10, y);
            y += lineHeight;
            pdf.text("Dirección Cliente: " + document.getElementById('direccion').value, 10, y);
            y += lineHeight;
            pdf.text("Tipo de Servicio: " + document.getElementById('tipoServicio').value, 10, y);
            y += lineHeight;
            pdf.text("Descripción del Equipo: " + document.getElementById('equipo').value, 10, y);
            y += lineHeight;
            pdf.text("Diagnóstico:", 10, y);
            y += lineHeight;
            pdf.text(document.getElementById('diagnostico').value, 10, y, { maxWidth: 190 });
            y += lineHeight * 3;

            if (!signaturePad.isEmpty()) {
                const signatureImage = signaturePad.toDataURL();
                pdf.addImage(signatureImage, 'PNG', 10, y, 50, 20);
            }

            pdf.save("reporte_tecnico.pdf");
        }
    </script>
</body>
</html>
